CREATE TABLE heap_modify_tuple_s (rf_a SERIAL PRIMARY KEY,
	b INT);

CREATE TABLE heap_modify_tuple (a SERIAL PRIMARY KEY,
	b INT,
	c TEXT,
	d TEXT
	);

CREATE INDEX heap_modify_tuple_b ON heap_modify_tuple (b);
CREATE INDEX heap_modify_tuple_c ON heap_modify_tuple (c);
CREATE INDEX heap_modify_tuple_c_b ON heap_modify_tuple (c,b);
CREATE INDEX heap_modify_tuple_b_c ON heap_modify_tuple (b,c);

INSERT INTO heap_modify_tuple_s (b) VALUES (0);
INSERT INTO heap_modify_tuple_s (b) SELECT b FROM heap_modify_tuple_s;
INSERT INTO heap_modify_tuple_s (b) SELECT b FROM heap_modify_tuple_s;
INSERT INTO heap_modify_tuple_s (b) SELECT b FROM heap_modify_tuple_s;
INSERT INTO heap_modify_tuple_s (b) SELECT b FROM heap_modify_tuple_s;
INSERT INTO heap_modify_tuple_s (b) SELECT b FROM heap_modify_tuple_s;
drop table heap_modify_tuple_s cascade;

-- CREATE TABLE clstr_tst_inh () INHERITS (heap_modify_tuple);

INSERT INTO heap_modify_tuple (b, c) VALUES (11, 'once');
INSERT INTO heap_modify_tuple (b, c) VALUES (10, 'diez');
INSERT INTO heap_modify_tuple (b, c) VALUES (31, 'treinta y uno');
INSERT INTO heap_modify_tuple (b, c) VALUES (22, 'veintidos');
INSERT INTO heap_modify_tuple (b, c) VALUES (3, 'tres');
INSERT INTO heap_modify_tuple (b, c) VALUES (20, 'veinte');
INSERT INTO heap_modify_tuple (b, c) VALUES (23, 'veintitres');
INSERT INTO heap_modify_tuple (b, c) VALUES (21, 'veintiuno');
INSERT INTO heap_modify_tuple (b, c) VALUES (4, 'cuatro');
INSERT INTO heap_modify_tuple (b, c) VALUES (14, 'catorce');
INSERT INTO heap_modify_tuple (b, c) VALUES (2, 'dos');
INSERT INTO heap_modify_tuple (b, c) VALUES (18, 'dieciocho');
INSERT INTO heap_modify_tuple (b, c) VALUES (27, 'veintisiete');
INSERT INTO heap_modify_tuple (b, c) VALUES (25, 'veinticinco');
INSERT INTO heap_modify_tuple (b, c) VALUES (13, 'trece');
INSERT INTO heap_modify_tuple (b, c) VALUES (28, 'veintiocho');
INSERT INTO heap_modify_tuple (b, c) VALUES (32, 'treinta y dos');
INSERT INTO heap_modify_tuple (b, c) VALUES (5, 'cinco');
INSERT INTO heap_modify_tuple (b, c) VALUES (29, 'veintinueve');
INSERT INTO heap_modify_tuple (b, c) VALUES (1, 'uno');
INSERT INTO heap_modify_tuple (b, c) VALUES (24, 'veinticuatro');
INSERT INTO heap_modify_tuple (b, c) VALUES (30, 'treinta');
INSERT INTO heap_modify_tuple (b, c) VALUES (12, 'doce');
INSERT INTO heap_modify_tuple (b, c) VALUES (17, 'diecisiete');
INSERT INTO heap_modify_tuple (b, c) VALUES (9, 'nueve');
INSERT INTO heap_modify_tuple (b, c) VALUES (19, 'diecinueve');
INSERT INTO heap_modify_tuple (b, c) VALUES (26, 'veintiseis');
INSERT INTO heap_modify_tuple (b, c) VALUES (15, 'quince');
INSERT INTO heap_modify_tuple (b, c) VALUES (7, 'siete');
INSERT INTO heap_modify_tuple (b, c) VALUES (16, 'dieciseis');
INSERT INTO heap_modify_tuple (b, c) VALUES (8, 'ocho');
-- This entry is needed to test that TOASTED values are copied correctly.
INSERT INTO heap_modify_tuple (b, c, d) VALUES (6, 'seis', repeat('xyzzy', 100000));

CLUSTER heap_modify_tuple_c ON heap_modify_tuple;


-- Verify that foreign key link still works
INSERT INTO heap_modify_tuple (b, c) VALUES (1111, 'this should fail');



-- Try changing indisclustered
ALTER TABLE heap_modify_tuple CLUSTER ON heap_modify_tuple_b_c;

-- Try turning off all clustering
ALTER TABLE heap_modify_tuple SET WITHOUT CLUSTER;
drop table heap_modify_tuple cascade;




-- Verify that clustering all tables does in fact cluster the right ones
CREATE USER clstr_user PASSWORD 'gauss@123';
CREATE TABLE heap_modify_tuple_1 (a INT PRIMARY KEY);
CREATE TABLE heap_modify_tuple_2 (a INT PRIMARY KEY);
CREATE TABLE heap_modify_tuple_3 (a INT PRIMARY KEY);
ALTER TABLE heap_modify_tuple_1 OWNER TO clstr_user;
ALTER TABLE heap_modify_tuple_3 OWNER TO clstr_user;
GRANT SELECT ON heap_modify_tuple_2 TO clstr_user;
INSERT INTO heap_modify_tuple_1 VALUES (2);
INSERT INTO heap_modify_tuple_1 VALUES (1);
INSERT INTO heap_modify_tuple_2 VALUES (2);
INSERT INTO heap_modify_tuple_2 VALUES (1);
INSERT INTO heap_modify_tuple_3 VALUES (2);
INSERT INTO heap_modify_tuple_3 VALUES (1);

-- "CLUSTER <tablename>" on a table that hasn't been clustered

CLUSTER slot_getattr_1_pkey ON heap_modify_tuple_1;
CLUSTER heap_modify_tuple_2 USING slot_getattr_2_pkey;
SELECT * FROM heap_modify_tuple_1 UNION ALL
  SELECT * FROM heap_modify_tuple_2 UNION ALL
  SELECT * FROM heap_modify_tuple_3
  ORDER BY 1;

drop table heap_modify_tuple_1;
drop table heap_modify_tuple_2;
drop table heap_modify_tuple_3;
drop user clstr_user cascade;







CREATE SCHEMA regress_rls_schema;
GRANT CREATE ON SCHEMA regress_rls_schema to public;
GRANT USAGE ON SCHEMA regress_rls_schema to public;
-- reconnect
\c
SET search_path = regress_rls_schema;
CREATE TABLE regress_rls_schema.document_row(
    did     int primary key,
    cid     int,
    dlevel  int not null,
    dauthor name,
    dtitle  text
);
GRANT ALL ON regress_rls_schema.document_row TO public;
INSERT INTO regress_rls_schema.document_row VALUES
    ( 1, 11, 1, 'regress_rls_bob', 'my first novel'),
    ( 2, 11, 5, 'regress_rls_bob', 'my second novel'),
    ( 3, 22, 7, 'regress_rls_bob', 'my science fiction'),
    ( 4, 44, 9, 'regress_rls_bob', 'my first manga'),
    ( 5, 44, 3, 'regress_rls_bob', 'my second manga'),
    ( 6, 22, 2, 'regress_rls_peter', 'great science fiction'),
    ( 7, 33, 6, 'regress_rls_peter', 'great technology book'),
    ( 8, 44, 4, 'regress_rls_peter', 'great manga'),
    ( 9, 22, 5, 'regress_rls_david', 'awesome science fiction'),
    (10, 33, 4, 'regress_rls_david', 'awesome technology book'),
    (11, 55, 8, 'regress_rls_alice', 'great biography'),
    (12, 33, 10, 'regress_rls_admin', 'physical technology'),
    (13, 55, 5, 'regress_rls_single_user', 'Beethoven biography');
ANALYZE regress_rls_schema.document_row;
UPDATE document_row SET dlevel = dlevel + 1 - 1 WHERE did > 1;
INSERT INTO document_row VALUES (100, 49, 1, 'regress_rls_david', 'testing sorting of policies');
DELETE FROM document_row WHERE did = 100;
INSERT INTO document_row VALUES (100, 49, 1, 'regress_rls_david', 'testing sorting of policies');
DELETE FROM document_row WHERE did = 100 RETURNING dauthor, did;

CREATE TABLE regress_rls_schema.account_row(
    aid   int,
    aname varchar(100)
) WITH (ORIENTATION=row);
CREATE ROW LEVEL SECURITY POLICY p01 ON document_row AS PERMISSIVE
    USING (dlevel <= (SELECT aid FROM account_row WHERE aname = current_user));
ALTER POLICY p01 ON document_row USING (dauthor = current_user);
ALTER POLICY p01 ON document_row RENAME TO p12;
ALTER POLICY p12 ON document_row RENAME TO p13;
ALTER POLICY p13 ON document_row RENAME TO p01;
SELECT * FROM pg_rlspolicies ORDER BY tablename, policyname;


drop schema regress_rls_schema cascade;
reset search_path;





create schema pgaudit_audit_object;
alter schema pgaudit_audit_object rename to pgaudit_audit_object_1;
drop schema pgaudit_audit_object_1;
create role davide WITH PASSWORD 'jw8s0F411_1';
ALTER ROLE davide SET maintenance_work_mem = 100000;
alter role davide rename to davide1;
drop role davide1;
create table pgaudit_audit_object (a int, b int);
CREATE VIEW vista AS SELECT * from pgaudit_audit_object;
alter view vista rename to vista1;
drop view vista1;
drop table pgaudit_audit_object;
CREATE DATABASE lusiadas;
alter database lusiadas rename to lusiadas1;
drop database lusiadas1;







CREATE ROLE regress_rls_group2 NOLOGIN PASSWORD 'Gauss@123';
CREATE TABLE par_row_t1 (id int, a int, b text)partition by range (a)
(
	partition par_row_t1_p0 values less than(10),
	partition par_row_t1_p1 values less than(50),
	partition par_row_t1_p2 values less than(100),
	partition par_row_t1_p3 values less than (maxvalue)
);

CREATE TABLE par_col_t1(id int, a int, b text) with(orientation = column) /*distribute by hash (id)*/ PARTITION BY RANGE (a)
(
	partition par_col_t1_p0 values less than(10),
	partition par_col_t1_p1 values less than(50),
	partition par_col_t1_p2 values less than(100),
	partition par_col_t1_p3 values less than (maxvalue)
);

INSERT INTO par_row_t1 VALUES (generate_series(1, 150) % 24, generate_series(1, 150), 'huawei');
INSERT INTO par_col_t1 VALUES (generate_series(1, 150) % 24, generate_series(1, 150), 'huawei');

GRANT SELECT ON par_row_t1 TO PUBLIC;
GRANT SELECT ON par_col_t1 TO PUBLIC;

CREATE ROW LEVEL SECURITY POLICY par_row_t1_rls1 ON par_row_t1 AS PERMISSIVE TO public USING(a <= 20);
CREATE ROW LEVEL SECURITY POLICY par_row_t1_rls2 ON par_row_t1 AS RESTRICTIVE TO regress_rls_group2 USING(id < 30);
CREATE ROW LEVEL SECURITY POLICY par_col_t1_rls1 ON par_col_t1 AS PERMISSIVE TO public USING(a <= 20);
CREATE ROW LEVEL SECURITY POLICY par_col_t1_rls2 ON par_col_t1 AS RESTRICTIVE TO regress_rls_group2 USING(id < 30);

ALTER TABLE par_row_t1 ENABLE ROW LEVEL SECURITY;
ALTER TABLE par_col_t1 ENABLE ROW LEVEL SECURITY;
DROP POLICY par_row_t1_rls1 ON par_row_t1; 
DROP POLICY par_row_t1_rls2 ON par_row_t1; 
DROP POLICY par_col_t1_rls1 ON par_col_t1; 
DROP POLICY par_col_t1_rls2 ON par_col_t1;
drop table par_row_t1 cascade;
drop table par_col_t1 cascade;
drop role regress_rls_group2;











CREATE TABLE heap_modify_tuple_4 (col1 int PRIMARY KEY, col2 INT, col3 smallserial)  ;
PREPARE p1 AS INSERT INTO heap_modify_tuple_4 VALUES($1, $2) ON DUPLICATE KEY UPDATE col2 = $1*100;
EXECUTE p1(5, 50);
SELECT * FROM heap_modify_tuple_4 WHERE col1 = 5;
EXECUTE p1(5, 50);
SELECT * FROM heap_modify_tuple_4 WHERE col1 = 5;
DELETE heap_modify_tuple_4 WHERE col1 = 5;
DEALLOCATE p1;
DROP TABLE heap_modify_tuple_4 CASCADE;





create table tGin122 (
        name varchar(50) not null, 
        age int, 
        birth date, 
        ID varchar(50) , 
        phone varchar(15),
        carNum varchar(50),
        email varchar(50), 
        info text, 
        config varchar(50) default 'english',
        tv tsvector,
        i varchar(50)[],
        ts tsquery);
insert into tGin122 values('Linda', 20, '1996-06-01', '140110199606012076', '13454333333', 'äº¬A QL666', 'linda20@sohu.com', 'When he was busy with teaching men the art of living, Prometheus had left a bigcask in the care of Epimetheus. He had warned his brother not to open the lid. Pandora was a curious woman. She had been feeling very disappointed that her husband did not allow her to take a look at the contents of the cask. One day, when Epimetheus was out, she lifted the lid and out it came unrest and war, Plague and sickness, theft and violence, grief, sorrow, and all the other evils. The human world was hence to experience these evils. Only hope stayed within the mouth of the jar and never flew out. So men always have hope within their hearts.
å·çªå¤©ç«ä¹åï¼å®æ¯å¯¹äººç±»çææä¸æ¥ä¿±å¢ãä¸å¤©ï¼ä»ä»¤å¿å­èµ«è²æ¯ææ¯ç¨æ³¥å¡ä¸ç¾å¥³åï¼å¹¶è¯·ä¼ç¥èµ äºå¥¹ä¸åçç¤¼ç©ãä¸ä¸çç¬¬ä¸ä¸ªå¥³äººæ¯ä½è¿·äººå¥³éï¼å ä¸ºå¥¹ä»æ¯ä½ç¥çµé£éå¾å°äºä¸æ ·å¯¹ç·äººæå®³çç¤¼ç©ï¼å æ­¤å®æ¯ç§°å¥¹ä¸ºæ½å¤æã
', 'ngram', '', '{''brother'',''ä¸æ¥ä¿±å¢'',''èµ«è²æ¯ææ¯''}',NULL);
insert into tGin122 values('å¼ ä¸', 20,  '1996-07-01', '140110199607012076', '13514333333', 'é²K QL662', 'zhangsan@163.com', 'å¸èåé¨å½çé¿å¡çæ¯æä¸¤ä¸ªå­©å­ï¼æ³çåæ¯åèµ«åãå½å½çç¦»
å¼ç¬¬ä¸ä¸ªå¦»å­åä¸ä¸ªåå«ä¼è¯ºçåå¥³äººç»å©åï¼ä¸¤ä¸ªå­©å­åå°åæ¯æ®å¿èå¾ï¼æ´ä¸ªçå½ä¹åå°æ¯ç­æ§çç«çä¾µè¢­ãä¼è¯ºå¨ç±è½»ä¿¡çä¸å¤«è³è¾¹è¿è°è¨ï¼ç»äºä½¿å½çç¸ä¿¡ï¼ä»çå¿å­æ³çåæ¯æ¯è¿æ¬¡ç¾å®³çç½ªé­ç¥¸é¦ï¼å¹¶è¦å°ä»ç®ç»å®æ¯ä»¥ç»æ
çç«ãå¯æçå­©å­è¢«æ¨ä¸äºç¥­åï¼å°è¦è¢«å¤æ­»ãæ­£å¨æ­¤æ¶ï¼ä¸å¸æ´¾äºä¸åªæµèº«ä¸ä¸é¿çéè²ç¾æ¯çå¬ç¾æ¥å°ä¸¤ä¸ªå­©å­é©®å¨èä¸å¸¦èµ°äºãå½ä»ä»¬é£è¿éå¼æ¬§æ´²åäºæ´²çæµ·å³¡æ¶ï¼èµ«åç±äºçå°æµ©ççæµ·æ´èå¤´æç®ç©ï¼æç»æè¿å¤§æµ·æ·¹æ­»äºã
è¿çæµ·æ´å¤æ¶åçåç§°å«èµ«åä¹æµ·ï¼èµ«åæææµ·å³¡ä¾¿ç±æ­¤èæ¥ãéè²å¬ç¾é©®çæ³çåæ¯ç»§ç»­ååé£å»ï¼æ¥å°äºé»æµ·ä¸å²¸çç§å°å¥æ¯ãå¨é£éï¼æ³çåæ¯å°å¬ç¾ç®ç»äºå®æ¯ï¼èå°éç¾æ¯éç»äºååå¿æ¯å½çãå½çå°ç¾æ¯éå¨ä¸æ£µå£æ ä¸ï¼
å¹¶æ´¾äºä¸æ¡ä¸ç¡è§çé¾è´è´£çæ¤ã', 'ngram', '',  '{''æ³çåæ¯åèµ«å'',''çå½'',''ååå¿æ¯å½ç''}',NULL); 
insert into tGin122 values('Sara', 20,  '1996-07-02', '140110199607022076', '13754333333', 'åA QL661', 'sara20@sohu.com', 'è±è¯­è¯­è¨ç»æéå½¢åï¼hypotaxisï¼ï¼æ±è¯­éä¹åï¼parataxisï¼>ï¼ä¹å°±æ¯è¯´ï¼è±è¯­çå¥å­ç»ç»éå¸¸éè¿è¿æ¥è¯ï¼connectivesï¼åè¯å°¾çæ²æååï¼inflectionï¼æ¥å®ç°ï¼æ±è¯­åè¾å°ä½¿ç¨è¿æ¥è¯ååè¯­æ³è§åçº¦æãè±è¯­å¥å­éè¿è¡¨ç¤ºåç§å³ç³»å¦å æãæ¡ä»¶ãé»è¾ãé¢è®¾ç­å½¢åææ®µç»ç»ï¼ç¯ç¯ç¸æ£ï¼>å¯ä»¥å½¢æåæ æä¸æ ·åå­è®¸å¤ä¿®é¥°æåååå¥çé¿å¥åå¤æå¥ï¼èæ±è¯­åå¤ç¨ç­å¥åç®åå¥ãæ­¤å¤ï¼è±è¯­æ³¨éä½¿ç¨åç§ç­è¯­ä½ä¸ºå¥å­çææåä½ï¼å¨ä¿®é¥°ä½ç½®ä¸å¯åå¯åãååçµæ´»ï¼å¸¸ä¹ æ¯äºåç½®è¯­åºãè¿äºå·®å¼å°±å½¢æäºçååçæè°
çè±è¯­âåé¶ä¸ºæ´âèæ±è¯­åâåæ´ä¸ºé¶âç¹ç¹ãæ­¤å¤ï¼è±è¯­å¤ç¨è¢«å¨è¯­æï¼è¿å¨ç§æè±è¯­ä¸­å°¤ä¸ºå¦æ­¤ãäºè§£è±è¯­åæ±è¯­è¿äºé å¥å·®å¼ï¼å°±å¯å¨è±è¯­é¿å¥åå¤æå¥ççè§£åç¿»è¯ä¸­ææè¯å°å°è±è¯­å¥å­æç§æ±è¯­é å¥ç¹ç¹è¿è¡è½¬åå¤çï¼ç­ä»å¥ç»æååç¬å¥å­æç¸åï¼åç½®ååç½®ï¼è¢«å¨åä¸»å¨ãä»¥ä¸ç»åæ¬äººå¨æå­¦ä¸­éå°çä¾å­ï¼è¯´è¯´å¦ä½å¯¹çç©ç±»ä¸ä¸è±è¯­é¿å¥åå¤æå¥ç¿»è¯è¿è¡ç¿»è¯å¤çã', 'english', '',  '{''parataxis'',''åç½®ååç½®'',''å·®å¼''}',NULL);
insert into tGin122 values('Mira', 20,  '1996-08-01', '140110199608012076', '13654333333', 'æ´¥A QL660', 'mm20@sohu.com', '[è§£æ]ç¬¬ä¸ä¸ªåå¥å®å°è¢«å¨è¯­æè¯ä¸ºä¸»å¨è¯­æï¼ç¬¬äºä¸ªåå¥å¦å°å®>è¯­åå¥å¤çä¸ºæ±è¯­åç½®ï¼âå©ç¨è½å¨å¹å»ç»ç»ä¸­è¿ééè§£èæ éæä¾ç¬¬äºç§çæ ¹å¹å»åºçIAAåæ¯åæè¿ä¸ªé®é¢çä¸ç§æç¨æ¹æ³ãâåä¼å ä¿®é¥°è¯­å¤ªé¿ï¼ä¸æçè§£ï¼ä¹ä¸ç¬¦åæ±è¯­ä¹ æ¯ï¼å®ä½ä¸ºåå¥å¤çã[ç¿»è¯]æ ¹åç«¯æéççé¿ç´ æ°´å¹³æå¶æ ¹çä¼¸é¿ï¼èå©ç¨IAAåæ¯åæè¿ä¸ªé®é¢çä¸ç§æç¨æ¹æ³ï¼å ä¸ºIAAè½å¨å¹å»ç»ç»ä¸­è¿ééè§£èæ éæä¾ç¬¬äºç§çæ ¹å¹å»åºã', 'english', '',  '{''æ±è¯­åç½®'',''åå¥å¤ç'',''çé¿ç´ æ°´å¹³''}',NULL);
insert into tGin122 values('Amy', 20,  ' 1996-09-01', '140110199609012076', '13854333333', 'åA QL663', 'amy2008@163.com', '[è§£æ]è¯¥å¥ççè§£çå³é®æ¯è¦æä½ä¸»å¥çç»æâCurrent concern focus on â¦â¦, and onâ¦â¦âï¼åæ¶ä¸è¦å°ç¬¬äºä¸ªâonâçæ­éï¼intrusiononï¼ä¸ä¸»å¥ä¸­ç¬¬ä¸ä¸ªåç¬¬ä¸ä¸ªâonâçæ­éï¼focusonï¼æ··æ·ãç¿»è¯æ¶ï¼ä¸ºäºé¿åå®¾è¯­çä¿®è¡¥è¯è¿é¿ï¼å¯ç¨âç®åå¬ä¼å¯¹è½¬åºå æ¤ç©çå³æ³¨éä¸­å¨è¿ä¸¤ç¹âæ¥ç¨âä¸æ¹é¢â¦â¦ï¼å¦ä¸æ¹é¢â¦â¦âæ¥åè¿°ï¼è¿æ ·å¤çæ´ç¬¦åæ±è¯­ä¹ æ¯ã', 'ngram', '',  '{''intrusionon'',''13854333333'',''140110199609012076''}',NULL);
insert into tGin122 values('æ±ªç²æ² ', 20,  ' 1996-09-01', '44088319921103106X', '13854333333', 'æ²YWZJW0', 'si2008@163.com', 'æ¨çç¾å¥½å°±å¦éèè¬è³é¦ï¼å¦æ²³æºªè¬æ¸æ¾ï¼å¦ç»çè¬éæï¼å¦>çé²è¬é¦çã[è§£æ]è¯¥å¥çä¸»å¥ç»æä¸ºâThis led to a whole new field of academic researchâï¼åé¢æä¸ä¸ªç°å¨åè¯ç»æâincluding the milestone paper by Paterson and co-workers in 1988âä¹åä¸ºâthe milestone papeé¿å®è¯­ä»å¥ãå¨ç¿»è¯æ¶ï¼å®å°è¯¥å®è¯­ä»å¥åè¯æå¥ï¼ä½è¦å°è¡¨ç¤ºæ¹æ³ææ®µçç°å¨åè¯ç»æâusing an approach that could be applied to dissect the genetic make-up of any physiological, morphological and behavioural trat in plants and animalsâåç½®è¯åºï¼è¿æ ·æ´ç¬¦åæ±è¯­çè¡¨è¾¾ä¹ æ¯ã', 'ngram', '',  '{''44088319921103106X'',''åè¯ç»æ'',''éæ''}',NULL);
create index tgin122_idx1 on tgin122 (substr(email,2,5));
create index tgin122_idx2 on tgin122 (upper(info));
set default_statistics_target=-2;
analyze tGin122 ((tv, ts));
select * from pg_ext_stats where schemaname='distribute_stat_2' and tablename='tgin122' order by attname;
alter table tGin122 delete statistics ((tv, ts));
update tGin122 set tv=to_tsvector(config::regconfig, coalesce(name,'') || ' ' || coalesce(ID,'') || ' ' || coalesce(carNum,'') || ' ' || coalesce(phone,'') || ' ' || coalesce(email,'') || ' ' || coalesce(info,''));
update tGin122 set ts=to_tsquery('ngram', coalesce(phone,'')); 
analyze tGin122 ((tv, ts));
select * from pg_ext_stats where schemaname='distribute_stat_2' and tablename='tgin122' order by attname;
alter table tGin122 delete statistics ((tv, ts));
select * from pg_ext_stats where schemaname='distribute_stat_2' and tablename='tgin122' order by attname;
alter table tGin122 add statistics ((tv, ts));
analyze tGin122;
select * from pg_ext_stats where schemaname='distribute_stat_2' and tablename='tgin122' order by attname;
select * from pg_stats where tablename='tgin122' and attname = 'tv';
select attname,avg_width,n_distinct,histogram_bounds from pg_stats where tablename='tgin122_idx1';
drop table tgin122 cascade;

















set client_min_messages=FATAL;
CREATE ROLE account1 IDENTIFIED BY '1q2w3e4r!';
CREATE ROLE account2 IDENTIFIED BY '1q2w3e4r@';

ALTER ROLE account2 IDENTIFIED BY '1q2w3e4r#' REPLACE '1q2w3e4r@';


set client_min_messages=FATAL;
ALTER ROLE account2 ACCOUNT UNLOCK;
ALTER ROLE account2 ACCOUNT LOCK;

set client_min_messages=FATAL;
ALTER ROLE account2 ACCOUNT UNLOCK;


drop user account1;
drop user account2;
\c












CREATE VIEW street AS
   SELECT r.name, r.thepath, c.cname AS cname
   FROM ONLY road r, real_city c
   WHERE c.outline ## r.thepath;

CREATE VIEW iexit AS
   SELECT ih.name, ih.thepath,
	interpt_pp(ih.thepath, r.thepath) AS exit
   FROM ihighway ih, ramp r
   WHERE ih.thepath ## r.thepath;

CREATE VIEW toyemp AS
   SELECT name, age, location, 12*salary AS annualsal
   FROM emp;

-- Test comments
COMMENT ON VIEW noview IS 'no view';
COMMENT ON VIEW toyemp IS 'is a view';
COMMENT ON VIEW toyemp IS NULL;

--
-- CREATE OR REPLACE VIEW
--

CREATE TABLE heap_modify_tuple_5 (a int, b int);
COPY heap_modify_tuple_5 FROM stdin;
5	10
10	15
15	20
20	25
\.

CREATE OR REPLACE VIEW viewtest AS
	SELECT * FROM heap_modify_tuple_5;


CREATE OR REPLACE VIEW viewtest AS
	SELECT * FROM heap_modify_tuple_5 WHERE a > 10;
drop table heap_modify_tuple_5 cascade;





create table test_comment_normal_view_column_t(id1 int,id2 int);
create or replace view test_comment_normal_view_column_v as select * from test_comment_normal_view_column_t;
create temp table test_comment_temp_view_column_t(id1 int,id2 int);
create or replace temp view test_comment_temp_view_column_v as select * from test_comment_temp_view_column_t;
comment on column test_comment_normal_view_column_t.id1 is 'this is normal table';
comment on column test_comment_normal_view_column_v.id1 is 'this is normal view';
comment on column test_comment_temp_view_column_t.id1 is 'this is temp table';
comment on column test_comment_temp_view_column_v.id1 is 'this is temp view';
\d+ test_comment_normal_view_column_t
\d+ test_comment_normal_view_column_v
comment on column test_comment_normal_view_column_t.id1 is 'this is normal table too';
drop table test_comment_normal_view_column_t cascade;













CREATE USER regression_user1 PASSWORD 'gauss@123';
CREATE USER regression_user2 PASSWORD 'gauss@123';
GRANT ALL ON regression_user0.deptest1 TO regression_user1;

SET SESSION AUTHORIZATION regression_user1 PASSWORD 'gauss@123';
CREATE TABLE deptest (a int primary key, b text);

CREATE TABLE deptest2 (f1 int);
-- make a serial column the hard way
CREATE SEQUENCE ss1;
ALTER TABLE deptest2 ALTER f1 SET DEFAULT nextval('ss1');
ALTER SEQUENCE ss1 OWNED BY deptest2.f1;
drop table deptest cascade;
drop table deptest2 cascade;
RESET SESSION AUTHORIZATION;

REASSIGN OWNED BY regression_user1 TO regression_user2;
drop user regression_user1 cascade;
drop user regression_user2 cascade;














set work_mem = '3MB';

create function report_guc(text) returns text as
$$ select current_setting($1) $$ language sql
set work_mem = '1MB';

select report_guc('work_mem'), current_setting('work_mem');

alter function report_guc(text) set work_mem = '2MB';

select report_guc('work_mem'), current_setting('work_mem');

alter function report_guc(text) reset all;

select report_guc('work_mem'), current_setting('work_mem');

drop function report_guc;

