/*
 * Copyright (c) 2020 Huawei Technologies Co.,Ltd.
 *
 * openGauss is licensed under Mulan PSL v2.
 * You can use this software according to the terms and conditions of the Mulan PSL v2.
 * You may obtain a copy of Mulan PSL v2 at:
 *
 *          http://license.coscl.org.cn/MulanPSL2
 *
 * THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND,
 * EITHER EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT,
 * MERCHANTABILITY OR FIT FOR A PARTICULAR PURPOSE.
 * See the Mulan PSL v2 for more details.
 * ---------------------------------------------------------------------------------------
 * 
 * callback.h
 *     license manager callback functions
 * 
 * IDENTIFICATION
 *        src/bin/license_checker/callback.h
 *
 * ---------------------------------------------------------------------------------------
 */
#ifndef __CALLBACK_H__
#define __CALLBACK_H__

#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <string.h>
#include <sys/sem.h>
#include <sys/ipc.h>
#include <sys/types.h>
#include <time.h>
#include <sys/time.h>
#include <signal.h>
#include <semaphore.h>
#include <fcntl.h>
#include "lic_base.h"
#include "lic_managersvc_itf.h"
#include "lic_managermnt_itf.h"
#include "lic_managercfg_itf.h"
#include "securec.h"
#include "securec_check.h"
#ifdef __cplusplus
extern "C" {
#endif /* __cpluscplus */
static char key_dat2[10240] = "FusionInsight:V100R002:0:1B0049279E085827B9006E00F200AB00E200530050006500D10068\
0043000900CA00BF00AB00E80045006600CA00480096003100660046005300E800D8007F005A007\
5009500D000BE00F3000300150084005000B300C400E1004E00E3006300FD0026002F008C00D900\
8E00FC002200DC006B000F00D9003A007200A000B1009C00EE00220012005400120065002000710\
06800490080008B005A00BC001300A100E100BD00E500C100D500820071007C00680082004B0046\
004D00AB00E900CC0094004900AC006100330082003B00F400D800FB00F0006800E000EE00DF000\
3002D00CE003400E6009F00D000F1006200FE006100DC00D2008A00EB0079009A00F700F1000900\
51003500E0006D0022000F001F00C0001400AC00B900A2003200F2003B0085003700C3000300730\
04100B700AE002400BD002D007300C30079006000E9006000950066002E004F00490030006800F0\
00AF00FB000500CB0085005400C200BF00A3008D00D60059008F00CF00510089006A002D00FB004\
3001F00C700E000C30020008E003B008E00060094006F0054005E0080005900DB00940026000600\
1C002200B90031001A0088003A0015004D00BE0076006000020087005D00EA001400E800E400FC0\
0EA0032004500B3009300CA005F00E4006A003E0070008D00A6002C007D001800410028001A0029\
00FE00A600E9002000A100F100830081000A00EB0097000C00BC006E00040094002A00A100B4007\
A00A0002200EF00410040004000FE00B700EE00B200CA00A10005000F005C00DF005600E1005100\
00002E0029004600A5006A009F00C300D900E60091000D000F003D002700950072001F00DE00D80\
05C00D400AC00DA00F5001A006C001300E700E7009D000F0027005F00A30087002A0072006D00AA\
002B006E0051006A003D001200000000000000000040DBBD1F62981D5F26FFC168D4FF2FF80232F\
F7A9759A3E3D8D75F7580BD7E08DA2170B5FA939527735DF9EDFEC12A962E31C724F4D54223E229\
DA391646FD6DA76CC08BA276B1F495F963FE4F2482FD5B2D62FC48D4EC2F2C4A71F4633440E2E25\
C51672FC4A599CE9080615062588EC297F5A2E845A937610B6933085EF0715D79666D651851426D\
7162725E8B82AC8DBA659D7C34FA2A646F2CBF89520C3078D64417E7DD04892B0B3F83E7361996A\
7957D0B4C6FFF4353A2D787A2BC6C60FA71B9049BC31AB98F47EB7C795CA594319DD697489B4237\
681E381BAC8AC9F2588A038EEE66205B2DF8A3837EA2E5C059E0EFF9ECCBEE2DDECE7974684868F\
BEA254300DE787689DA3A8751DEFA26D58876256053EE18A7A3CF4B941968DB349F84CA02879402\
828171605CD7466179FF50B8544685CB9AEAB799498B493DDBB4CF8E70A053DE15476A1DFB9D948\
76D54652EBBDDEBF219CBE9B5D15245C1F0998673048E47F956E5C58813E6326F723825C8AED13C\
AECA45BE728843BDC37566CFE262D0CF6FC60D93465A38DA3DA35877EF1870BEEC51240A92FF5F9\
5B09351D6F79C9A851221B3A4BD8A6531C3E8DA20D34C47AB21F0ACA33F898982840576D590976D\
CB20EBFEDAC45A43981E637B572B1CEF3240EBF167C3F8F40440B503A1F539BC9ABBFD2852FE739\
3DAF2F0FD4D478D500EFA211A57DAC0C8A8BF2C2CBE0F099F7AA1A896CAD624AAD124556EFCE7AB\
BAE8F06FB10BEE6C9A0652F152A894C551FA04B62AB8ADA29CC9A1D05152DA817BF0BD809EAB4F1\
8A1C9122E211966E67B5C5DE539385B794BA3963587C42B6996BB8BD4A141A74ACDCF2898AB7C2A\
5F0DB1957036AC9CD7E735BE081CB70F659262901C796A700001392F7CBFC701586BB07F99E5FF3\
BAA64E0A98468E66131F6EE28450D1BD67B245DD867C655C1F8E8D854367A818945C86ACE252BC3\
383354330661934118E026EEFBFB9692D95F8108D4AF796660DE193880CF23F7FEE370E95A25C1D\
C65D1DC13C3D453E48803D51C15CAA1974011AE58A2021E2990C26A4C140D77D773B45FF56BEF27\
F6C1A6979A5553B3570C7604C5889BF5F0D44324628CFBFEC23C509C94A8E6CFC9B2AE3101B507D\
54E74F64E407B1A783B691E3850E2329DC39348948E1E24E1971F3111E9AD6F7616C43099129121\
63F8E28C2BC44BB17D2833CE79224633EFDC0A53EAD66F4264FBED2D8F5F85E9E0F10D7A87CA2D5\
366A1700661EB5D99540913AAE34AD60547BCDA74212F81C182A289C03C5EE67A564B7EE6C5459B\
E6D518846A10DEE3F2F3BE4893CC30109A934C92C781809C922F1A688E7CB2BC1C436D7D4C696C5\
7E5F2441FB35732775E28F72689D8A54984A12842702EDC6497938E9CB3FC0BA94C73504FA0154A\
8D32C703BEAE5C505671AEC9179FB313EAAB1D9CA63649D7481E973A2F38F9B355E5BC572A37756\
54A7608E27EB9E29A3DCEC5129D5A9010D6D1328EB12FE29066BCF00B347D41FF56801B4CBB1A81\
DD06A36A445A5A9C15158281D74121317F794B04CE713F181A094685DE064A707E4AA217FA6EFAB\
C507EDA592B3D61EEDA69F9DD8F83E847901BFE1018203B3A92114A93274F1EE2AB9603AA22F106\
FAB71FAF7918E2547901EE287E8C4D90143210B827AA36016A0EC0B4250D987627AD6AF292D5C3B\
0942DC246015E848CADBF6CCAF8BA132B59A9C3466C5F3B7ACA82229848DF5FAD86FF0461485EBF\
B70B53DF9E289527A8EC44D1488C1EBE5CB9705A1664315A8C843BF3EE8E953AEE4B8B8F1E4BE17\
9787B757BC012A5078AD72DBB7E5AD1AF1C9579ECDE9384DCC211A94B1741A3F23110DC2D531908\
CF58F2ED9263227BA829BCD5CC5BAE104A48FEBBB610913F4717A979493F0B92B94D7725A766AAB\
CEB595145977AAC893E95AC5502AC87DECE0E8C9B942EABDCA7A8FE296A8EAEE6C49E9722F17A40\
53351B90E99DDEAD745881B77D3684D7EE85CAEDEB0BE4780A89D1FA62177FFB9CD8E41E6322F55\
ED7A0CBA4F03742B241C8EE51C6B53078CD5F9DB8FA41E429257AB3FF2B0E0030AB513A25D4526A\
7A75E054E4DDDC66D57BE3F7984CC429598D765015B96DBBF82CC11DD5B5EB85B8BDA748A753F53\
E69E2758408C99F32CD9291E533B68E8EE4B074959C9D8A3BAF246472E3DC01868FC68A4AF0B8A0\
E809A362C3213ACBD5ED88178592D1D7A17691164D94A46979D05023495E4A237361B4D300F8B82\
6795CED68B6EC36F0609EF7A4B49B103C833C598888C3E4A776A90348BFC6E734EAEDA4CE8EC63D\
C2FCC54519010127302F8AE2F39E116A2FB91C43281307BD67B9531B6BE868CFCDDD616FD249409\
D12AC80DF4FFE104799A96890B1CA62CE4294A519CDB20A489CB7E86CB3DA69F4A049DC18740668\
3433FF998086E4060F3AD2EF70EAF59818976C378BA4EEF280D6BF535EAFE78B9615BA4D765B02F\
C00C148DDFB2AEFDAD5EBA1617F610EEF2DE990AFFD1A32D10710B0031BFC8E0D2F6BD2EB35DDB3\
30218C2D1ABD718FC4A2FB3124E15E44034C505EDC61AA17C769A19FA933D1F4BA7AEB18D2CBC8B\
E2D40B8DFB9614EC4155B501C8FC3586E853F05133DBCB7049B573DC983128925D82FCB8394EAAF\
DB66611A0544B0252136B39814326B66CEA5B408F39DB065100A42FEE32E311F598BBB8EC1BEC55\
662B63778F141600D9740AD82B4800D3E5F7F277481578854F7F110F8EFDD45EDF39101759FF837\
57E01CFAB2FA16C64BB6C9FABBF2FE1C6422A23070DE1D8A26DBE032250537A6FD67CED0C73E968\
A2FC235632A64BD846049931A3C2D3E9C1AE86BBDAC488E0351CDBA4B3667AD1795A49F4702D144\
EF0D0A2B3A45F157C02F11A1690CC47700830084006C001500DE00C500C400E3005400FD00AA002\
10093001F00EE001600BE00000019004D002200BB0015008A009900A0CF3A65C48652C6CA4B2F56\
3576BA1FFBBC5CAB000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
0000000000000000000000000000000000000000000000000000000000000000000000000000000\
000000000000000000000000:2913224514";

#define LIC_OS_CALLBACK_NUM 9

#define LIC_APP_CALLBACK_NUM 3

#define LIC_RES_MAX_NUM 11

#define MAX_INT_NUM 2147483648

/***********************************************************************************************/
/***********************************************************************************************/

/************************************************************************/
/************************************************************************/
LIC_VOID* OS_DynMalloc(LIC_ULONG ulSize);

/************************************************************************/
/************************************************************************/
LIC_VOID OS_DynFree(LIC_VOID* pAddr);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_SmMCreate(LIC_CHAR* pszName, LIC_ULONG* pSm);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_SmDelete(LIC_ULONG ulSmID);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_SmP(LIC_ULONG ulSem, LIC_ULONG ulTimeOutInMillSec);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_SmV(LIC_ULONG ulSmID);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_GetSysTime(LIC_SYS_T_STRU* pSysTime);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_StartTimer(LIC_ULONG* pTmHandler, LIC_ULONG ulLength, LIC_SYS_T_STRU* pTime,
    LIC_TIMER_CALLBACK_FUNC pTmCallBack, LIC_ULONG ulMode, LIC_ULONG ulType, LIC_ULONG ulTimerId);

/************************************************************************/
/************************************************************************/
LIC_ULONG OS_StopTimer(LIC_ULONG ulTmHandler);

/************************************************************************/
/************************************************************************/
LIC_ULONG APP_GetMachineEsn(LIC_ULONG* pulCount, LIC_MACHINEID_STRU* pstMachineId);

/************************************************************************/
/************************************************************************/
LIC_ULONG APP_IOReadCallback(LIC_ULONG ulType, LIC_VOID* pBuf, LIC_ULONG* pulLen, LIC_ULONG ulOffSet);

/************************************************************************/
/************************************************************************/
LIC_ULONG APP_IOWriteCallback(LIC_ULONG ulType, LIC_VOID* pBuf, LIC_ULONG ulLen, LIC_ULONG ulOffSet);

#ifdef __cplusplus
}
#endif /* __cpluscplus */

#endif /*__CALLBACK_H__*/
